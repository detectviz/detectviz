# Prompt List 1

- [ ]  In `pkg/ifaces/logger/logger.go`, add the following content:
- [ ]  在 `pkg/ifaces/logger/logger.go` 中，為所有英文註解補上繁體中文對應，格式為英文註解後加上 `// zh: ...`，如下所示：
- [ ]  在 `pkg/ifaces/cachestore/cachestore.go` 中新增以下內容，定義 CacheStore 介面，並加入繁體中文註解：
- [ ]  將 `pkg/ifaces/cachestore/cachestore.go` 中的所有註解統一格式，仿照 Grafana 的風格，保留英文註解為主，繁體中文註解作為補充，並用 `// zh:` 開頭緊接其後，方便 Cursor 理解與生成實作。
- [ ]  在 `/Users/zoe/Documents/github/detectviz/pkg/ifaces/config/config.go` 為 `ConfigProvider` interface 及其方法補上英文主註解與 `// zh:` 繁體中文對應說明，格式統一如下：
- [ ]  在 `docs/interfaces/README.md` 中新增介面撰寫準則，涵蓋風格統一、註解格式與設計原則，內容如下：
- [ ]  Interface 檔案放置於 `pkg/ifaces/{module}/{name}.go`
- [ ]  命名使用 PascalCase（如 `Logger`, `CacheStore`, `EventBus`）
- [ ]  一個檔案只定義一個主要 interface
- [ ]  每個方法數量建議在 3～7 個以內，過多請拆分子模組
- [ ]  英文主註解（簡潔描述用途）
- [ ]  對應的繁體中文補充，使用 `// zh:` 開頭
- [ ]  僅定義「Detectviz 需要什麼」，不耦合第三方套件實作（如 zap, Redis）
- [ ]  interface 為抽象 contract，不包含具體邏輯
- [ ]  若需支援 context、trace、TTL、分群等擴充性，應納入 method 設計
- [ ]  實作放在 `internal/adapters/{module}` 中
- [ ]  所有 interface 的中文說明與使用情境應補充於 `docs/interfaces/{name}.md`
- [ ]  若 interface 被核心流程注入，請註記於 `bootstrap.Init()` 文件或架構圖中
- [ ]  在 `docs/interfaces/interface-doc-template.md` 中建立 interface 文件模板，供後續撰寫各 interface 說明文件參考，內容如下：
- [ ]  提供設定存取抽象層
- [ ]  支援模組間的訊息廣播
- [ ]  統一快取存取與替換機制
- [ ]  與 OpenTelemetry 整合之觀測能力抽象
- [ ]  在 `bootstrap.Init()` 中注入供 core 使用
- [ ]  被 HTTP middleware 呼叫以取得 trace context
- [ ]  在任務排程器中使用以避免重複執行
- [ ]  `Get(key string) string`：回傳對應設定值，若不存在可能為空字串
- [ ]  `WithContext(ctx)`：將 context 內 trace id 注入 logger 流程
- [ ]  `Publish(topic string, payload any)`：廣播一筆訊息給訂閱者
- [ ]  `internal/adapters/logger/zaplogger.go`
- [ ]  `internal/adapters/cachestore/memcache.go`
- [ ]  `internal/adapters/eventbus/inmemory.go`
- [ ]  `internal/adapters/{module}/nop.go`（測試用）
- [ ]  與 trace / metrics 的整合
- [ ]  Redis/NATS 替代支援
- [ ]  可 plugin 化設計
- [ ]  在 `docs/interfaces/README.md` 中的結尾（`--` 前），新增一段說明，引導開發者使用 `interface-doc-template.md` 撰寫對應說明文件：
- [ ]  撰寫對應說明文件時，請參考 `docs/interfaces/interface-doc-template.md`，以統一內容結構與敘述方式
- [ ]  在 `docs/interfaces/logger.md` 中填入以下內容，依照 `interface-doc-template.md` 撰寫 Detectviz 專案中 Logger 介面的設計說明與使用情境：
- [ ]  支援 info/warn/error/debug 等基本層級
- [ ]  結構化欄位輸出以利後續分析
- [ ]  可透過 context 傳遞 trace_id / span_id 等追蹤資訊
- [ ]  可擴充為 OTLP 相容輸出，對應 Grafana Tempo/Loki 等後端
- [ ]  於 `bootstrap.Init()` 時注入核心服務
- [ ]  在中介層（middleware）中用來記錄每筆 HTTP 請求的追蹤資訊
- [ ]  各模組的背景任務、排程、事件流程中記錄異常與執行過程
- [ ]  搭配 `WithFields()` 加入額外欄位，支援告警等分析場景
- [ ]  `Info(msg string, fields ...any)`：輸出 info 等級日誌
- [ ]  `Warn(msg string, fields ...any)`：輸出 warning 日誌
- [ ]  `Error(msg string, fields ...any)`：輸出錯誤日誌
- [ ]  `Debug(msg string, fields ...any)`：輸出除錯資訊
- [ ]  `WithFields(map[string]any)`：產生包含額外欄位的 logger 實例
- [ ]  `WithContext(ctx context.Context)`：從 context 中注入 trace/span context
- [ ]  `Named(name string)`：以模組名稱標記 logger
- [ ]  `Sync()`：針對支援緩衝的 logger，強制將內容寫出（例如 zap）
- [ ]  `internal/adapters/logger/zaplogger.go`：使用 zap + otelzap 實作
- [ ]  `internal/adapters/logger/noplogger.go`：空實作，用於測試或禁用日誌
- [ ]  `internal/adapters/logger/stdout.go`：開發期簡易 console 實作（可選）
- [ ]  與 OpenTelemetry trace context 整合，支援 log-trace correlation
- [ ]  可結合 Loki / Tempo 透過 OTLP 匯出
- [ ]  未來可 plugin 化實作，允許切換後端儲存方式（ex: Loki, file, stdout, Redis）
- [ ]  將 `docs/interfaces/config.md` 調整為與 `interface-doc-template.md` 相同格式，包含用途、使用情境、方法說明、實作建議與擴充性說明：
- [ ]  解耦設定來源與業務邏輯
- [ ]  避免使用全域變數與硬編碼
- [ ]  提供 hot-reload 支援與擴充性（YAML, DB, 遠端等）
- [ ]  易於 mock、測試與插件化
- [ ]  在 `internal/bootstrap/init.go` 中初始化並注入各模組
- [ ]  各子模組透過 `Get`, `GetBool` 等方式查詢設定值
- [ ]  支援後續單元測試與動態切換設定來源
- [ ]  `Get(key string) string`：回傳指定 key 對應的字串設定值
- [ ]  `GetInt(key string) int`：回傳整數型別設定值
- [ ]  `GetBool(key string) bool`：回傳布林值設定值
- [ ]  `GetOrDefault(key, defaultVal string) string`：回傳 key 設定值，若無則回傳預設值
- [ ]  `Reload() error`：重新載入設定來源（若實作支援），可用於 hot-reload
- [ ]  `pkg/config/default.go`：預設記憶體實作，支援環境變數與 map
- [ ]  `internal/adapters/config/yaml.go`（可選擴充）：支援 YAML 檔案讀取
- [ ]  `internal/adapters/config/remote.go`（可選擴充）：支援 HTTP 或 config service
- [ ]  可搭配 `watcher` 類型模組監控設定變更（future）
- [ ]  可與遠端設定管理服務（如 Consul、etcd）整合
- [ ]  interface 抽象化允許單元測試時注入 mock 設定來源
- [ ]  在 `docs/interfaces/cachestore.md` 中新增以下內容，依據 `interface-doc-template.md` 標準撰寫 Detectviz 專案中 CacheStore 介面的說明文件：
- [ ]  支援 memory / Redis 等可替換快取後端
- [ ]  提供簡潔 API：Get、Set、Delete、Has、Keys
- [ ]  可設定 TTL 避免資料長期殘留
- [ ]  可抽換為 no-op 快取以支援測試場景
- [ ]  掃描模組快取 PDU 辨識結果（避免重複掃描）
- [ ]  快取自動部署中繼資料（如已產生 conf 標記）
- [ ]  Web UI 暫存狀態資訊（如選單、快照等）
- [ ]  任務排程器暫存任務執行結果防止重複執行
- [ ]  `Get(key string) (string, error)`：取得指定 key 對應值，不存在時回傳錯誤
- [ ]  `Set(key string, val string, ttlSeconds int)`：寫入快取，ttl 為 0 表示永久有效
- [ ]  `Has(key string) bool`：檢查 key 是否存在
- [ ]  `Delete(key string)`：刪除指定快取資料
- [ ]  `Keys(prefix string) ([]string, error)`：回傳所有符合 prefix 的 key（便於批次操作）
- [ ]  `internal/adapters/cachestore/mem.go`：記憶體快取，使用 go-cache 實作
- [ ]  `internal/adapters/cachestore/redis.go`：Redis 快取，支援跨節點與 TTL
- [ ]  `internal/adapters/cachestore/nop.go`：空實作，用於測試、禁用快取場景
- [ ]  可與任務模組、掃描模組、Web UI 共享使用
- [ ]  可支援自定義 namespace 或 key prefix 規則
- [ ]  若需支援分散式環境，可實作對應 Redis Cluster adapter
- [ ]  在 `pkg/ifaces/eventbus/eventbus.go` 中新增 EventBus interface，設計符合 Detectviz 架構，支援同步與非同步事件發佈，並加入中英文註解：
- [ ]  將 `pkg/ifaces/eventbus/eventbus.go` 重新設計為明確的事件分派介面（Dispatcher Pattern），取代匿名 topic-based bus。
- [ ]  定義具體事件型別 `AlertTriggeredEvent` 與相應的 handler 介面 `AlertEventHandler`。
- [ ]  將 `EventDispatcher` 作為主介面，支援事件調度與 handler 註冊（可擴充）。
- [ ]  在 `docs/interfaces/eventbus.md` 中撰寫 EventDispatcher 說明文件，採用與其他 interface 一致的標準格式，內容如下：
- [ ]  避免全域 bus 模式的模糊耦合
- [ ]  支援事件導向的模組解耦
- [ ]  明確定義事件結構與 handler 介面
- [ ]  可擴充支援多事件型別與多 handler
- [ ]  告警模組觸發 `AlertTriggeredEvent`，由事件調度器分派給一或多個 handler（如通知模組、紀錄模組）
- [ ]  測試階段可替換為 mock dispatcher 驗證模組事件是否正確發送
- [ ]  未來擴充多型別事件時，可統一在 dispatcher 中管理調度邏輯
- [ ]  `DispatchAlertTriggered(ctx, event)`：分派告警事件至所有已註冊的處理器
- [ ]  `RegisterAlertHandler(handler)`：註冊一個可處理告警事件的模組（handler）
- [ ]  `internal/adapters/eventbus/inmemory.go`：記憶體內同步分派實作
- [ ]  `internal/adapters/eventbus/nop.go`：空實作（不進行任何處理，常用於測試或禁用）
- [ ]  每個事件型別建議定義：
- [ ]  若事件種類增加，例如：
- [ ]  將 `pkg/ifaces/eventbus/eventbus.go` 中定義的 `AlertTriggeredEvent` 與 `AlertEventHandler` 結構與介面移除，僅保留 `EventDispatcher` 介面與其與告警事件相關的方法與註解。
- [ ]  保留 `context` import 以支援方法簽名。
- [ ]  在 `pkg/ifaces/eventbus/alert.go` 中新增 `AlertTriggeredEvent` 結構與 `AlertEventHandler` 介面，內容從原先 `eventbus.go` 拆出，並保留原本的中英文註解：
- [ ]  在 `pkg/ifaces/eventbus/task.go` 中新增 `TaskCompletedEvent` 結構與 `TaskEventHandler` 介面，用於模組間事件調度，格式與 alert.go 一致：
- [ ]  在 `pkg/ifaces/eventbus/eventbus.go` 的 `EventDispatcher` 介面中新增對 `TaskCompletedEvent` 的支援，包含 `DispatchTaskCompleted` 與 `RegisterTaskHandler` 方法及中英文註解：
- [ ]  在 `pkg/ifaces/eventbus/eventbus.go` 的 `EventDispatcher` 介面中，加入分隔線註解區塊，以區分不同事件方法群組，提升可讀性：
- [ ]  在 `docs/interfaces/eventbus.md` 的「方法說明（Methods）」與「關聯模組與擴充性（Related & extensibility）」區段，加入 `TaskCompletedEvent` 的方法與說明，並使用分隔線註解以對齊程式碼風格：
- [ ]  `DispatchAlertTriggered(ctx, event)`：分派告警事件至所有已註冊的處理器
- [ ]  `RegisterAlertHandler(handler)`：註冊一個可處理告警事件的模組（handler）
- [ ]  `DispatchTaskCompleted(ctx, event)`：分派任務完成事件至所有已註冊的處理器
- [ ]  `RegisterTaskHandler(handler)`：註冊一個可處理任務完成事件的模組（handler）
- [ ]  每個事件型別建議定義：
- [ ]  若事件種類增加，例如：
- [ ]  在 `pkg/ifaces/eventbus/host.go` 中將 `DeviceRegisteredEvent` 改名為 `HostDiscoveredEvent`
- [ ]  將 `DeviceEventHandler` 改名為 `HostEventHandler`
- [ ]  將欄位名稱從 `DeviceID` 改為 `HostID`
- [ ]  更新所有英文與繁體中文註解同步為 `host` 命名語意，對齊 Grafana 生態風格
- [ ]  在 `pkg/ifaces/eventbus/metric.go` 中新增 `MetricOverflowEvent` 結構與 `MetricEventHandler` 介面，語意對齊 Grafana 生態圈命名風格：
- [ ]  在 `EventDispatcher` 介面中加入 `HostDiscoveredEvent` 與 `MetricOverflowEvent` 的分派與註冊方法
- [ ]  保持與其他事件一致的分隔區塊註解風格與中英文註解
- [ ]  在 `docs/interfaces/eventbus.md` 中補上 `HostDiscoveredEvent` 與 `MetricOverflowEvent` 的方法說明區塊
- [ ]  將原有 `DeviceRegisteredEvent` 改為 `HostDiscoveredEvent`
- [ ]  保持與其他事件一致的分隔格式與說明語氣
- [ ]  `DispatchHostDiscovered(ctx, event)`：分派主機註冊/發現事件至所有已註冊的處理器
- [ ]  `RegisterHostHandler(handler)`：註冊可處理主機事件的模組（handler）
- [ ]  `DispatchMetricOverflow(ctx, event)`：分派指標溢出事件至所有已註冊的處理器
- [ ]  `RegisterMetricHandler(handler)`：註冊可處理指標溢出事件的模組（handler）
- [ ]  若事件種類增加，例如：
- [ ]  在 `pkg/ifaces/alert/evaluator.go` 中新增 `AlertEvaluator` interface，定義告警條件評估模組的行為。
- [ ]  加入中英文註解，風格與其他介面一致：
- [ ]  在 `docs/interfaces/alert.md` 中新增 `AlertEvaluator` 說明文件，格式依照其他 interface 文件統一，內容如下：
- [ ]  提供統一的評估邏輯輸入與輸出格式
- [ ]  將告警條件與評估實作解耦（支援不同計算邏輯）
- [ ]  可擴充支援 PromQL、Flux、Threshold 等類型的條件式
- [ ]  支援測試與模擬評估結果（例如 dry-run）
- [ ]  告警條件設定被系統排程觸發時，透過 `Evaluate()` 對條件進行分析
- [ ]  多種告警類型（簡單閾值、公式、外部查詢）皆可使用共用介面
- [ ]  可於前端提供即時評估檢查功能（預覽是否會觸發告警）
- [ ]  `Evaluate(ctx, cond)`：傳入條件進行分析，回傳評估結果（是否觸發、計算值、訊息）
- [ ]  `AlertCondition`：包含條件 ID、運算式、閾值、標籤等設定值
- [ ]  `AlertResult`：回傳結果包含是否觸發（firing）、提示訊息與對應值
- [ ]  `internal/adapters/alert/static.go`：簡單閾值邏輯
- [ ]  `internal/adapters/alert/prom.go`：查詢 Prometheus 結果進行比對
- [ ]  `internal/adapters/alert/nop.go`：空實作，用於測試或跳過
- [ ]  可與告警排程器（scheduler）整合，作為 rule 執行引擎
- [ ]  可結合記錄器（logger）或事件分派（EventDispatcher）觸發後續處理
- [ ]  可擴充成多策略評估框架，支援多語法條件式、比對模式等
- [ ]  在 `docs/interfaces/alert.md` 中重寫 `AlertEvaluator` 說明文件，加入 `MetricQueryAdapter` 的解耦查詢層設計，並呈現完整擴充性架構如下：
- [ ]  提供統一的評估邏輯輸入與輸出格式
- [ ]  將資料查詢來源與邏輯解耦
- [ ]  可支援不同查詢語法（PromQL、Flux、SQL）
- [ ]  容易進行測試與替換資料來源
- [ ]  當系統根據排程或事件觸發告警條件檢查時，由 `AlertEvaluator` 根據規則進行條件判斷
- [ ]  開發期間可使用 mock 查詢 adapter 進行邏輯驗證
- [ ]  不同類型資料來源可共用相同的評估流程（例如同一告警模組可查詢 InfluxDB 或 Prometheus）
- [ ]  `Evaluate(ctx, cond)`：傳入條件進行分析，回傳是否觸發與相關訊息
- [ ]  `Query(ctx, expr, labels)`：查詢指定指標資料，回傳數值結果，供評估邏輯使用
- [ ]  `AlertCondition`：包含條件 ID、查詢語句（Expr）、閾值（Threshold）、Label 條件等
- [ ]  `AlertResult`：回傳結果包含是否觸發（Firing）、提示訊息、對應值
- [ ]  `internal/adapters/alert/static.go`：固定值或閾值比對邏輯
- [ ]  `internal/adapters/alert/prom.go`：透過 Prometheus 查詢條件結果進行判斷
- [ ]  `internal/adapters/alert/nop.go`：無行為實作，用於跳過或測試
- [ ]  `internal/adapters/metrics/prom.go`：使用 PromQL 執行查詢
- [ ]  `internal/adapters/metrics/flux.go`：使用 Flux 執行 InfluxDB 查詢
- [ ]  `internal/adapters/metrics/mock.go`：開發與測試使用固定值回傳
- [ ]  可與告警排程器（scheduler）整合，由其傳入條件進行批次判斷
- [ ]  評估成功後可搭配 `EventDispatcher` 觸發通知與記錄事件
- [ ]  下層查詢介面可依據需求擴充支援新格式（SQL, OpenTSDB, external API 等）
- [ ]  在 `docs/interfaces/alert.md` 中更新 `MetricQueryAdapter` 的說明，補充 `flux.go` 實作意圖，並新增一段「如何擴充新資料來源」的小節，說明應實作哪些部分：
- [ ]  `internal/adapters/metrics/prom.go`：查詢 Prometheus 資料（PromQL）
- [ ]  `internal/adapters/metrics/flux.go`：查詢 InfluxDB 資料（Flux）
- [ ]  `internal/adapters/metrics/mock.go`：測試或模擬固定數值
- [ ]  在 `docs/interfaces/alert.md` 中將下列段落進行調整：
- [ ]  `internal/adapters/alert/static.go`：固定值或閾值比對邏輯
- [ ]  `internal/adapters/alert/nop.go`：無行為實作，用於跳過或測試
- [ ]  在 `pkg/ifaces/metric/query.go` 中新增 `MetricQueryAdapter` 介面定義，並加入中英文註解，支援查詢指標值並回傳數值結果：
- [ ]  在 `pkg/ifaces/metric/metric.go` 中建立檔頭與說明註解，作為未來擴充指標相關抽象介面的容器。
- [ ]  不定義具體 interface，僅保留說明。
- [ ]  在 `pkg/ifaces/metric/metric.go` 中新增 `MetricWriter` interface，定義寫入指標資料的標準方法，並加上中英文註解。
- [ ]  在 `pkg/ifaces/metric/metric.go` 中新增 `MetricTransformer` interface，定義用於指標資料前處理（如標籤合併、單位轉換等）。
- [ ]  新增 `MetricSeriesReader` interface，定義用於讀取一段時間序列資料（如報表、趨勢圖等）。
- [ ]  將 `/pkg/ifaces/metric/metric.go` 第 1–9 行註解簡化為正式描述，移除已實作項目的「未來擴充說明」。
- [ ]  在 `pkg/ifaces/metric/mock_adapter.go` 中建立 `MockQueryAdapter`、`MockWriter`、`MockSeriesReader` 實作，分別實作 `MetricQueryAdapter`、`MetricWriter`、`MetricSeriesReader` 介面。
- [ ]  提供簡單回傳固定數值或模擬資料的邏輯，供開發或測試用途。
- [ ]  在 `pkg/ifaces/metric/flux_adapter.go` 中建立 `FluxQueryAdapter`，實作 `MetricQueryAdapter` 介面，提供基本查詢範本與結構，尚未實作實際邏輯，供後續整合 InfluxDB 用。
- [ ]  在 `pkg/ifaces/metric/prom_adapter.go` 中新增 `PromQueryAdapter` 結構，實作 `MetricQueryAdapter` 介面，預留查詢 Prometheus 功能的 TODO 區塊，包含中英文註解：
- [ ]  在 `pkg/ifaces/metric/types.go` 中新增檔案並移動 `TimePoint` 結構定義，保留原註解。
- [ ]  在 `pkg/ifaces/metric/metric.go` 中移除 `TimePoint` 定義並補上 `types.go` 引用。
- [ ]  在 `pkg/ifaces/metric/types.go` 中新增 `TimeRange` 結構，搭配既有的 `TimePoint` 作為查詢參數使用。
- [ ]  在 `internal/adapters/metrics/mock_adapter.go` 中將 `TimePoint` 結構改為引用 `pkg/ifaces/metric` 中的定義。
- [ ]  新增必要的 import 語句，並將原本 `TimePoint` 用法替換為 `metric.TimePoint`。
- [ ]  更新 `internal/adapters/metrics/flux_adapter.go` 的 `Query` 方法備註與結構說明。
- [ ]  預先引用 `pkg/ifaces/metric` 以利後續使用 `TimePoint` 或其他結構。
- [ ]  統一風格與其他 adapter 實作相符。
- [ ]  在 `internal/adapters/metrics/prom_adapter.go` 中加入對 `pkg/ifaces/metric` 的 import。
- [ ]  統一註解風格，與其他 adapter 對齊。
- [ ]  在 `internal/adapters/metrics/writer_adapter.go` 中建立 `InfluxMetricWriter` 結構，實作 `MetricWriter` 介面。
- [ ]  預留寫入 InfluxDB 的 TODO 區塊，並加入必要 import 與中英文註解。
- [ ]  在 `writer_adapter.go` 中新增 `PushgatewayMetricWriter` 和 `MockMetricWriter`。
- [ ]  實作 `WritePoint` 方法，回傳錯誤或模擬儲存資料。
- [ ]  在 `internal/adapters/metrics/transformer_adapter.go` 中新增 `NoopTransformer` 結構，實作 `MetricTransformer` 介面，作為不進行任何轉換的預設範本。
- [ ]  加入中文註解以利後續開發與測試。
- [ ]  在 `internal/adapters/metrics/series_reader_adapter.go` 中新增 `MockSeriesReader` 作為 `MetricSeriesReader` 的簡單範本實作，並提供模擬資料產生邏輯與必要註解。
- [ ]  刪除 `/internal/adapters/metrics/series_reader_adapter.go` 中的 `MockSeriesReader` 結構與實作，因為與 `mock_adapter.go` 中內容重複。
- [ ]  在保留檔案的情況下，加入說明註解標示來源已移至 `mock_adapter.go`，避免未來誤用。
- [ ]  在 `internal/adapters/metrics/aggregator.go` 中新增 `SimpleAggregator` 實作，提供時間序列加總與平均等統計摘要邏輯。
- [ ]  搭配 `metric.TimePoint` 使用，作為未來報表或圖表分析的邏輯支援。
- [ ]  移除 `MockSeriesReader` 結構與方法，因其已移至其他檔案（或應集中管理）。
- [ ]  補上註解說明此檔案僅保留 `MockQueryAdapter` 與 `MockWriter`。
- [ ]  在 `internal/adapters/metrics/series_reader_adapter.go` 中補回 `MockSeriesReader` 實作。
- [ ]  確保其符合 `MetricSeriesReader` 介面並使用 `metric.TimePoint` 結構。
- [ ]  移除原本的說明註解（因已重新納入實作）。
- [ ]  為 `MockSeriesReader` 結構與 `ReadSeries` 方法補上標準格式的中英文註解。
- [ ]  合併 `MockWriter` 與 `MockMetricWriter` 為單一結構 `MockMetricWriter`，保留註解與行為一致。
- [ ]  移除重複的 `MockWriter` 結構與方法。
- [ ]  將 `series_reader_adapter.go` 中的 import 區塊註解補上中英文說明，以符合統一風格。
- [ ]  在 `internal/adapters/metrics/series_reader_adapter.go` 中新增 `InfluxSeriesReader` 結構，實作 `MetricSeriesReader` 介面。
- [ ]  統一註解格式，保留查詢邏輯為 TODO，符合現有風格。
- [ ]  建立 `docs/interfaces/metric.md`，說明與 `Metric` 模組介面與實作 adapter 對應結構。
- [ ]  採統一標題格式與中英文雙語說明。
- [ ]  `SimpleAggregator`：可進行 `sum`、`avg`、`min`、`max` 等基本統計運算。
- [ ]  實作位置：`aggregator.go`
- [ ]  實作對應 interface 並放入 `internal/adapters/metrics/`
- [ ]  保持一個 adapter 僅實作一種行為（查詢、寫入、轉換、聚合）
- [ ]  測試邏輯可使用 mock 結構快速驗證
- [ ]  統一註解風格與格式，更新 `docs/interfaces/alert.md`，將 MetricQueryAdapter 說明集中至 Metrics 模組中，避免重複，並補充 AlertEvaluator 的專屬設計目的與擴充說明。
- [ ]  接收 `AlertCondition` 作為輸入
- [ ]  呼叫注入的 `MetricQueryAdapter` 查詢資料
- [ ]  根據條件比較結果回傳 `AlertResult`
- [ ]  由排程器或事件觸發時，批次執行多筆條件檢查
- [ ]  可於測試階段透過 Mock Adapter 驗證評估邏輯
- [ ]  生產環境可共用一套評估器，但對接不同資料來源（Prometheus、InfluxDB 等）
- [ ]  輸入：`AlertCondition`（條件 ID、Expr、閾值、標籤等）
- [ ]  輸出：`AlertResult`（是否觸發、訊息、實際值）
- [ ]  建立檔案：`internal/adapters/metrics/{source}_adapter.go`
- [ ]  實作方法：`Query(ctx, expr, labels) (float64, error)`
- [ ]  包裝對應查詢語法（PromQL、Flux、SQL、API…）並解析為數值
- [ ]  若查詢結果須特殊處理（如比對多欄位、進行統計），可建立專屬 `AlertEvaluator`
- [ ]  例如：`fluxEvaluator := NewEvaluator(fluxAdapter)`
- [ ]  於 `bootstrap/init.go` 中依資料來源或環境設定注入對應實作
- [ ]  評估器由 `AlertScheduler` 控制執行時機
- [ ]  結果可拋給 `EventDispatcher` 通知對應管道
- [ ]  下層資料查詢可使用統一介面（`MetricQueryAdapter`）自由替換與擴充
- [ ]  重寫 `docs/interfaces/eventbus.md` 以符合目前的程式架構與格式。
- [ ]  明確區分 Dispatcher interface、各事件介面與資料結構。
- [ ]  補充方法用途與檔案位置，統一為中英文對照。
- [ ]  定義所有支援的事件型別與對應的註冊與分派邏輯
- [ ]  將事件廣播給所有註冊的 handler
- [ ]  支援測試用的 Nop / InMemory 實作
- [ ]  `DispatchHostDiscovered`：發送主機註冊事件
- [ ]  `RegisterHostHandler`：註冊主機事件的接收者
- [ ]  `DispatchMetricOverflow`：發送指標過多事件（如分群維度超標）
- [ ]  `RegisterMetricHandler`：註冊指標事件處理器
- [ ]  `DispatchTaskCompleted`：任務完成後發送通知
- [ ]  `RegisterTaskHandler`：註冊接收任務完成事件的模組
- [ ]  每新增一個事件型別，請建立：
- [ ]  建議將每個事件類型放入獨立檔案管理，並在 `eventbus.go` 中用區塊分隔定義。
- [ ]  在 `docs/interfaces/eventbus.md` 中修正錯誤描述：「AlertTriggeredEvent（已移除）」應改為「AlertTriggeredEvent」，因其已存在於 EventDispatcher 介面中。
- [ ]  保留表格格式與檔案對應不變。
- [ ]  在 `docs/interfaces/eventbus.md` 中補上 AlertTriggeredEvent 的介面與事件結構區塊，對齊其他事件說明格式。
- [ ]  `DispatchAlertTriggered`：發送告警觸發事件
- [ ]  `RegisterAlertHandler`：註冊接收告警事件的處理器
- [ ]  在 `docs/interfaces/eventbus.md` 的每個事件區塊下方補充「實作位置」行，標示 handler interface 對應檔案。
- [ ]  與現有文件結構一致，統一格式。
- [ ]  更新 `## 實作位置（Expected Implementations）` 區塊的標題與描述，使其更清楚是針對 `EventDispatcher` 的具體實作範例。
- [ ]  補充說明這些實作符合 `pkg/ifaces/eventbus/eventbus.go` 所定義的介面。
- [ ]  在 `docs/interfaces/eventbus.md` 的「EventDispatcher 實作範例」表格下方，補上一行說明未來可擴充實作的檔案位置。
- [ ]  在 `## EventDispatcher 實作範例（Dispatcher Implementations）` 表格下方補上一段補充說明「預期擴充實作檔案位置」的段落。
- [ ]  `internal/adapters/eventbus/kafka.go`
- [ ]  `internal/adapters/eventbus/nats.go`
- [ ]  `internal/adapters/eventbus/redis.go`
- [ ]  在 `## EventDispatcher 實作範例（Dispatcher Implementations）` 區塊下補充每個 Event Handler 預期對應的 Adapter 檔案路徑，統一風格。
- [ ]  在 `internal/adapters/eventbus/alert.go` 中新增 `AlertLoggerHandler` 實作 `AlertEventHandler` 介面，作為接收到告警觸發事件時的處理範例。
- [ ]  保留中英文註解格式統一。
- [ ]  在 `internal/adapters/eventbus/host.go` 中新增 `HostLoggerHandler` 結構，實作 `HostEventHandler` 介面。
- [ ]  補上中英文註解，用於接收到 `HostDiscoveredEvent` 後進行日誌輸出。
- [ ]  在 `internal/adapters/eventbus/metric.go` 中新增 `MetricLoggerHandler`，實作 `MetricEventHandler` 介面。
- [ ]  補上中英文註解，當接收到 `MetricOverflowEvent` 時輸出日誌。
- [ ]  在 `internal/adapters/eventbus/task.go` 中新增 `TaskLoggerHandler` 結構，實作 `TaskEventHandler` 介面。
- [ ]  實作 `HandleTaskCompleted` 方法，接收到事件時輸出日誌。
- [ ]  補上中英文註解說明。
- [ ]  將 `MetricLoggerHandler` 中的 `log.Printf` 改為使用 `logger` 模組記錄。
- [ ]  假設已匯入 `github.com/detectviz/detectviz/pkg/ifaces/logger` 並已設有 `logger.FromContext(ctx)` 介面。
- [ ]  修正 `internal/adapters/eventbus/metric.go` 中對 logger 使用方式的錯誤。
- [ ]  原本 `logger.Logger.WithContext(ctx)` 是錯誤的靜態調用方式，應改為 `logger.FromContext(ctx)`。
- [ ]  建立 `pkg/ifaces/logger/context.go`，提供將 logger 注入與從 context 擷取 logger 的工具函式。
- [ ]  補上完整中英文註解，並提供 fallback logger。
- [ ]  在 `pkg/ifaces/logger/nop_logger.go` 中新增 `NopLogger` 結構，實作 `Logger` interface。
- [ ]  所有方法皆為空操作，作為靜默 fallback 實作。
- [ ]  補上中英文註解。
- [ ]  建立 `internal/adapters/logger/zap_adapter.go`，實作 `logger.Logger` interface，使用 `zap.SugaredLogger`。
- [ ]  支援命名、欄位擴充、context 注入等功能。
- [ ]  使用中英文註解說明。
- [ ]  在 `internal/adapters/logger/nop_adapter.go` 中新增 `NewNopLogger` 函式，回傳 `logger.NopLogger`。
- [ ]  此函式可用於初始化 fallback logger 或單元測試。
- [ ]  補上中英文註解。
- [ ]  將 `NewNopLogger()` 回傳型別從 `logger.Logger` 改為 `logger.NopLogger`，或
- [ ]  更好的方式是確認 `NopLogger` 是否完整實作 `Logger` interface。
- [ ]  根據錯誤訊息，`logger.NopLogger` 缺少 `Debug()` 方法。
- [ ]  因此在 `pkg/ifaces/logger/nop_logger.go` 中補上 `Debug()` 方法，以符合 interface 定義。
- [ ]  在 `pkg/ifaces/logger/nop_logger.go` 中新增缺少的 `Error` 方法以符合 `Logger` interface 定義。
- [ ]  在 `pkg/ifaces/logger/nop_logger.go` 中補上缺少的 `Info` 方法實作，以符合 `Logger` interface。
- [ ]  方法為 no-op（不做任何事），並加上中英文註解。
- [ ]  在 `pkg/ifaces/logger/nop_logger.go` 補上缺少的 `Warn` 方法實作，以符合 `Logger` interface。
- [ ]  方法為 no-op 並補上中英文註解。
- [ ]  在 `internal/adapters/logger/zap_adapter.go` 的 `ZapLogger` 型別上補上 `Debug(msg string)` 方法，以符合 `logger.Logger` interface。
- [ ]  保留中英文註解，並將 `Debug` 與 `Debugf` 分別處理。
- [ ]  在 `internal/adapters/logger/zap_adapter.go` 中補上缺少的非格式化方法 `Info`, `Warn`, `Error`。
- [ ]  保持與 `Debug` 方法一致風格，補上中英文註解。
- [ ]  修改 `internal/adapters/logger/zap_adapter.go` 中 `Debug` 方法簽章，使其符合 interface 要求（接受 `msg string, args ...any`）。
- [ ]  合併原本 `Debug` 與 `Debugf` 方法為一個帶變數參數的方法。
- [ ]  同樣調整 `Info`, `Warn`, `Error` 方法為相同結構：
- [ ]  移除原有 `Debugf`, `Infof`, `Warnf`, `Errorf` 方法，統一為一組方法簽章。
- [ ]  更新 `/docs/interfaces/logger.md` 文件內容以符合目前實作狀況與統一註解風格。
- [ ]  修正檔案名稱、補充方法說明範例語法、調整實作路徑為正確的 `zap_adapter.go`、`nop_adapter.go`。
- [ ]  新增 context 工具與 NopLogger 說明。
- [ ]  支援 info/warn/error/debug 等基本層級
- [ ]  結構化欄位輸出以利後續分析
- [ ]  可透過 context 傳遞 trace_id / span_id 等追蹤資訊
- [ ]  可擴充為 OTLP 相容輸出，對應 Grafana Tempo / Loki 等後端
- [ ]  於 `bootstrap.Init()` 時注入核心服務
- [ ]  在中介層（middleware）中記錄 HTTP 請求 trace 資訊
- [ ]  各模組的背景任務、排程、事件流程中記錄異常與執行過程
- [ ]  搭配 `WithFields()` 加入欄位，支援告警與結構化分析
- [ ]  `Debug/Info/Warn/Error`：依據 log level 輸出訊息與欄位
- [ ]  `WithFields`：新增自定欄位後回傳 logger 實例
- [ ]  `WithContext`：擴充 context（可整合 trace_id / span_id）
- [ ]  `Named`：新增 logger 名稱（模組分區）
- [ ]  `Sync`：強制 flush（適用於 zap、buffered logger）
- [ ]  可於 middleware 注入 logger 到 context，供後續擷取
- [ ]  未注入時預設回傳 `NopLogger`
- [ ]  與 OpenTelemetry trace context 整合，支援 log-trace correlation
- [ ]  可結合 Loki / Tempo 透過 OTLP 匯出
- [ ]  可 plugin 化 logger backend（stdout、Loki、Redis、file 等）
- [ ]  修正 `log.Infof` 為正確的介面方法 `log.Info`
- [ ]  修正 `event.Target` 為 `event.Instance`，對齊目前定義的欄位
- [ ]  確保呼叫的是變數 log 的方法，而非 interface 名稱
- [ ]  更新 `HostDiscoveredEvent` 結構，新增欄位 `Source` 與 `Labels`。
- [ ]  更新 `MetricOverflowEvent` 結構，新增欄位 `Instance` 與 `Reason`。
- [ ]  將 `internal/adapters/eventbus/alert.go` 中的 `log.Printf` 改為使用統一的 logger 模組。
- [ ]  使用 `logger.FromContext(ctx)` 提取 logger。
- [ ]  補上 log 結構化欄位與中英文註解。
- [ ]  將 `log.Printf` 改為使用統一的 logger 模組。
- [ ]  使用 `logger.FromContext(ctx)` 提取 context-aware logger。
- [ ]  輸出結構化欄位：`name`, `source`, `labels`。
- [ ]  補上中英文註解一致性。
- [ ]  將 `MetricLoggerHandler` 中的 `log.Info(...)` 改為結構化輸出 `WithFields(...)`。
- [ ]  補齊欄位：`metric`, `value`, `threshold`, `instance`, `reason`。
- [ ]  補上對應中英文註解。
- [ ]  將 `log.Printf` 改為使用 `logger.FromContext(ctx)` 取得的統一 logger。
- [ ]  輸出欄位包含 `task_id`, `worker_id`, `status`。
- [ ]  補上結構化日誌與一致的中英文註解。
- [ ]  在 `internal/adapters/logger/logger_test.go` 建立測試 ZapLogger 與 NopLogger 的基本測試案例。
- [ ]  使用 `testing` 套件與 zap `zapcore` 中的 `observer` 進行觀察。
- [ ]  驗證 Logger 行為與 context 整合。
- [ ]  修正 zap logger 測試中的錯誤：
- [ ]  建立 `pkg/ifaces/logger/context_test.go`，測試 WithContext 與 FromContext 的行為。
- [ ]  驗證能夠正確從 context 中注入與擷取 logger，並支援 fallback。
- [ ]  在 `docs/interfaces/logger.md` 補充「測試建議與驗證方式」章節。
- [ ]  說明 `logger_test.go` 與 `context_test.go` 內容與目的。
- [ ]  確保說明方式與整體文件風格一致。
- [ ]  能正確將 logger 實例注入並從 context 中擷取
- [ ]  ZapLogger 能輸出結構化欄位，包含 msg 與 key-value pairs
- [ ]  NopLogger 調用不會 panic，並正確回傳自身
- [ ]  未注入時 FromContext 回傳預設 fallback logger（NopLogger）
- [ ]  使用 `zaptest/observer` 觀察輸出行為
- [ ]  使用標準 `testing` 套件進行介面一致性驗證
- [ ]  為 `pkg/config/default.go` 中的所有結構與方法補上中英文註解。
- [ ]  註解風格統一，使用 `// zh:` 表示中文說明。
- [ ]  建立 `pkg/ifaces/scheduler/scheduler.go`，定義排程模組用的介面。
- [ ]  補上中英文註解，說明目的與用途。
- [ ]  在 `pkg/ifaces/notifier/notifier.go` 中定義 `Notifier` 介面，代表通知通道抽象。
- [ ]  補上中英文註解，對齊專案既有風格。
- [ ]  在 `internal/adapters/scheduler/cron_adapter.go` 建立 `CronScheduler` 實作，符合 `scheduler.Scheduler` 介面。
- [ ]  使用 `robfig/cron/v3` 套件。
- [ ]  包含中英文註解。
- [ ]  在 `internal/adapters/scheduler/workerpool_adapter.go` 建立 `WorkerPoolScheduler` 實作，符合 `scheduler.Scheduler` 介面。
- [ ]  使用 goroutine pool 處理任務。
- [ ]  加入中英文註解。
- [ ]  修改 `WorkerPoolScheduler` 的 `worker()` 方法，加入 logger 支援與 retry 機制。
- [ ]  引入 `logger.Logger` interface 並允許在執行 Job 時記錄失敗。
- [ ]  若 `Job.Run` 失敗，重試最多 3 次，每次延遲 1 秒，並記錄錯誤。
- [ ]  在 `WorkerPoolScheduler` 結構中新增 `log logger.Logger` 欄位以支援日誌記錄。
- [ ]  修改 `NewWorkerPoolScheduler` 函式以接收 `logger.Logger`。
- [ ]  在 `worker` 方法中實作簡單 retry 機制（最多 3 次），每次間隔 1 秒，並記錄每次錯誤與最終失敗訊息。
- [ ]  建立 `mock_adapter.go`，提供 `MockScheduler` 與 `MockJob` 作為測試與開發用途的模擬實作。
- [ ]  實作 `scheduler.Scheduler` 與 `scheduler.Job` 介面。
- [ ]  補上中英文註解以保持一致風格。
- [ ]  新增內部結構 `cronJob`，包含排程規則 `spec` 與任務 `job`
- [ ]  修改原本 `jobs []scheduler.Job` 為 `jobs []cronJob`
- [ ]  將原本 `Register(job Job)` 改為 `Register(spec string, job Job)`
- [ ]  在 `Start()` 方法中根據每個 job 的 `spec` 註冊排程
- [ ]  補齊中英文註解
- [ ]  在 `Start` 方法中加入錯誤處理與 logger 支援。
- [ ]  修改 `NewCronScheduler` 函式以支援 logger 注入。
- [ ]  在檔案下方補上註冊範例作為參考（非執行程式碼）。
- [ ]  補上 `docs/interfaces/scheduler.md` 文件，統一說明 `Job` 和 `Scheduler` 介面。
- [ ]  明確說明使用統一的 logger 注入，而非重複定義 logger interface。
- [ ]  補上三種實作與用途說明。
- [ ]  `Job` 是一個抽象任務單位，會被 `Scheduler` 定期調度執行。
- [ ]  `Scheduler` 是排程框架介面，負責註冊與管理任務生命週期。
- [ ]  **所有實作應使用統一的 `pkg/ifaces/logger.Logger` 介面，不應自行定義 logger。**
- [ ]  Logger 透過建構時注入（例如 `NewCronScheduler(logger.Logger)`）或從 context 中擷取。
- [ ]  位置：`internal/adapters/scheduler/cron_adapter.go`
- [ ]  使用 [robfig/cron](https://github.com/robfig/cron)
- [ ]  支援以 `Register(spec, job)` 形式註冊任務
- [ ]  位置：`internal/adapters/scheduler/workerpool_adapter.go`
- [ ]  使用固定數量 goroutine 執行任務（每 5 秒輪詢）
- [ ]  內建 retry 機制（最多 3 次）與 logger 錯誤記錄
- [ ]  位置：`internal/adapters/scheduler/mock_adapter.go`
- [ ]  僅用於測試，不會實際執行任務
- [ ]  可觀察註冊與觸發行為
- [ ]  在 `internal/bootstrap/scheduler_registry.go` 建立 `ProvideScheduler` 函數。
- [ ]  根據 name 傳回對應的 scheduler 實作。
- [ ]  預設支援 “cron”, “workerpool”, “mock”，並注入 logger。
- [ ]  修改 CronScheduler 的 Register 方法簽名，從 Register(spec string, job scheduler.Job) 改為 Register(job scheduler.Job)，以符合 scheduler.Scheduler interface。
- [ ]  將 cronJob 結構移除，改為直接使用 job.Spec() 取得時間字串。
- [ ]  假設 scheduler.Job interface 已擴充為包含 Spec() string 方法。
- [ ]  在 Job interface 中新增 Spec() string 方法，代表排程時間字串。
- [ ]  補上中英文註解。
- [ ]  建立 `scheduler_test.go`，測試 `Job` interface 的基本實作行為。
- [ ]  使用 mock job 測試 `Name()`, `Spec()`, `Run()` 是否正確運作。
- [ ]  在 `scheduler_test.go` 中加入 `Scheduler` interface 整合測試。
- [ ]  使用 `MockScheduler` 來驗證 `Register()` 是否成功註冊 job，並模擬啟動與停止流程。
- [ ]  加入 `TestWorkerPoolSchedulerIntegration` 測試範例，實際驗證 `WorkerPoolScheduler` 的註冊與重試執行行為。
- [ ]  使用 sleep 模擬等待 worker 執行。
- [ ]  移除與 `WorkerPoolScheduler` 測試無關的內容
- [ ]  僅保留 `MockSchedulerIntegration` 測試
- [ ]  將多餘的 `testLogger`、`mockJobWithRun` 等內容移除
- [ ]  確保 mockJob 結構與測試只針對 `MockScheduler` 進行測試
- [ ]  移除 mockScheduler 相關測試與結構，僅保留對 mockJob 的介面測試。
- [ ]  將 mockJob 的註解格式統一為中英文雙語，對齊專案風格。
- [ ]  測試函數命名統一為 `TestJob_InterfaceCompliance`。
- [ ]  統一註解格式為中英文
- [ ]  為所有 struct 和方法補上中英文註解
- [ ]  測試名稱維持不變，保持與測試行為一致性
- [ ]  建立 `workerpool_adapter_test.go` 測試檔案。
- [ ]  測試 `WorkerPoolScheduler` 的整合行為，驗證 retry、註冊與執行。
- [ ]  使用 `testLogger` 觀察 log 並符合 logger.Logger 介面。
- [ ]  將目前的 `pkg/ifaces/scheduler/workerpool_adapter_test.go` 移動至 `internal/adapters/scheduler/workerpool_adapter_test.go`
- [ ]  修正 import 名稱衝突，將 `internal/adapters/scheduler` 改為 `adapters`，`pkg/ifaces/scheduler` 改為 `ifacescheduler`
- [ ]  調整程式碼中對 `scheduler` 的呼叫為 `adapters`
- [ ]  將 import 中的 `scheduler` 區分為 adapters 與 ifaces，避免名稱衝突
- [ ]  確保 Scheduler interface 符合性驗證
- [ ]  補上 assert 型別轉換註解，與中英文註解一致性
- [ ]  在 `testLogger` struct 中新增 `Named(string) logger.Logger` 方法，以符合完整的 `logger.Logger` 介面。
- [ ]  保持其他方法為空實作。
- [ ]  修改 `testLogger` 的 `Named` 方法回傳正確型別：`logger.Logger` 而非 `interface{}`
- [ ]  匯入 `ifacelogger` 並明確指定回傳型別
- [ ]  建立 `cron_adapter_test.go`，用於測試 `CronScheduler` 的基本排程功能。
- [ ]  測試目標：註冊任務後能自動執行、logger 注入正確。
- [ ]  使用短時間排程間隔加上 sleep 模擬實際行為。
- [ ]  在 `testlogger.go` 中建立 `testLogger` 實作，符合 `logger.Logger` 介面。
- [ ]  用於測試時注入 logger，相容於所有 Scheduler adapter 測試。
- [ ]  所有方法皆為空實作，適合測試用。
- [ ]  修正 `WithContext` 回傳型別，應為 `(logger.Logger, context.Context)` 而非單一值，否則無法實作完整介面。
- [ ]  將 `testLogger` 結構移除，改為匯入並使用共用的 `testLogger` 實作。
- [ ]  新增匯入 `"github.com/detectviz/detectviz/internal/adapters/scheduler/testlogger"`。
- [ ]  使用 `testlogger.New()` 建立 logger 實例。
- [ ]  完整撰寫 `docs/interfaces/scheduler.md` 文件，描述 `pkg/ifaces/scheduler` 中的 Scheduler 模組設計。
- [ ]  包含：設計目標、主要介面、使用情境、實作位置與擴充方式，符合目前 detectviz 的風格與文檔格式。
- [ ]  支援多種排程策略（cron 表達式 / worker pool）
- [ ]  可註冊多個 Job，依 Spec 週期執行
- [ ]  Job 實作需符合 `Job` interface，支援命名與規劃時間
- [ ]  執行失敗可搭配 retry 機制
- [ ]  可注入 logger 追蹤任務執行情況
- [ ]  定時資料清理
- [ ]  健康檢查回報
- [ ]  統計與指標定時彙整
- [ ]  告警重試任務佇列
- [ ]  所有 Scheduler 實作均可注入 logger 以記錄排程狀態。
- [ ]  建議測試放置於：
- [ ]  註冊方式：
- [ ]  logger：注入 `pkg/ifaces/logger.Logger`
- [ ]  context：排程與中止控制
- [ ]  robfig/cron：提供定時執行解析能力（已使用於 cron adapter）
- [ ]  重寫 `docs/interfaces/scheduler.md`，整合先前設計說明與目前 interface 結構。
- [ ]  統一文件格式、補充實作與測試對應關係，補充設計原則與擴充方式。
- [ ]  抽象化任務調度機制
- [ ]  支援多種排程策略（如 Cron、Worker Pool）
- [ ]  任務具備命名與週期定義能力
- [ ]  支援 logger、retry 機制
- [ ]  易於單元測試與擴充新排程方式
- [ ]  `Job` 定義任務名稱、週期與執行邏輯。
- [ ]  `Scheduler` 負責註冊、啟動與停止任務。
- [ ]  定時資料清理
- [ ]  健康檢查回報
- [ ]  指標彙整與轉拋任務
- [ ]  延遲執行的重試任務佇列
- [ ]  撰寫 `docs/interfaces/notifier.md` 說明文件，對應 `pkg/ifaces/notifier` 設計。
- [ ]  說明目標、介面定義、使用情境、實作與測試結構，符合 detectviz 文件標準。
- [ ]  抽象化通知機制，可對接多種傳送通道
- [ ]  支援通知格式、封裝欄位、等級分類
- [ ]  可於告警事件或排程任務中呼叫
- [ ]  易於擴充：如 email, webhook, Slack, Line 等
- [ ]  與 alert 與 eventbus 模組整合
- [ ]  告警觸發時發送通知（搭配 alert evaluator）
- [ ]  任務完成後回報通知（如定時轉拋任務）
- [ ]  系統異常通知管理員
- [ ]  整合 eventbus 以即時推送事件
- [ ]  logger：用於記錄通知成功與錯誤訊息
- [ ]  alert / eventbus：可能的通知來源
- [ ]  config：設定每個通知通道的憑證與網址
- [ ]  補充 `Message` 結構的 `Target` 與 `Time` 欄位，以對應 `docs/interfaces/notifier.md` 的設計。
- [ ]  補上缺漏的欄位註解與介面說明一致。
- [ ]  新增 `email_adapter.go` 檔案內容，實作 Notifier 介面，用於發送 email。
- [ ]  僅為初版範例，實際寄信邏輯未實作，日後可接 SMTP、SendGrid 等服務。
- [ ]  修改 `Send` 方法，改為使用 logger 紀錄通知內容而非 fmt.Printf。
- [ ]  加入 logger 注入欄位與建構函式參數。
- [ ]  使用 `logger.Logger` 介面來記錄 email 發送內容。
- [ ]  新增 `slack_adapter.go`，實作 Notifier 介面。
- [ ]  使用 logger 記錄傳送內容，實際發送邏輯以 TODO 註解標示，可後續接入 Slack API。
- [ ]  新增 `webhook_adapter.go` 檔案內容，實作 Notifier 介面，用於發送 HTTP POST 通知。
- [ ]  使用 logger 紀錄請求與錯誤，尚未包含實際 HTTP client。
- [ ]  將 `NewWebhookNotifier` 函式加入一個可選參數 `client`，以支援自訂 HTTP client。
- [ ]  若未提供 client，則預設使用 `http.DefaultClient`。
- [ ]  建立 mock 通知實作 `MockNotifier`，符合 `notifier.Notifier` interface。
- [ ]  記錄每次傳送的訊息，可供測試驗證。
- [ ]  建立 `notifier_registry.go` 檔案內容。
- [ ]  提供 `NewNotifierRegistry` 函式，注入 logger 並回傳三種 notifier 實作（Email、Slack、Webhook）。
- [ ]  使用對應適配器與 interface 匯入。
- [ ]  新增 `pkg/config/notifier.go` 檔案內容，定義 notifier 的設定結構，供 bootstrap/notifier_registry 使用。
- [ ]  提供可從 JSON 或其他來源解析的欄位，包括 type、target、enable、name。
- [ ]  修改 `NewNotifierRegistry` 函式為支援動態設定。
- [ ]  改為接收 `[]config.NotifierConfig` 參數，並依據 type 判斷初始化對應的 notifier。
- [ ]  加入錯誤處理與 logger 記錄未知類型。
- [ ]  建立 `notifier_registry_test.go` 測試檔。
- [ ]  測試 `NewNotifierRegistry` 根據設定是否正確註冊啟用的 notifier。
- [ ]  使用測試 logger。
- [ ]  更新 `docs/interfaces/notifier.md` 中的「擴充方式（Extension Tips）」段落。
- [ ]  明確補上 notifier 註冊邏輯統一集中於 `internal/bootstrap/notifier_registry.go`。
- [ ]  在 `Init()` 函式中初始化並注入 notifier 註冊邏輯。
- [ ]  匯入 notifier bootstrap 模組並使用 config 提供設定。
- [ ]  假設未來將 notifier registry 結果交由其他模組使用，暫先建立變數保留。
- [ ]  在 `ConfigProvider` interface 中新增方法 `GetNotifierConfigs() []config.NotifierConfig`。
- [ ]  用來支援從設定提供者中取得 notifier 配置陣列。
- [ ]  在 `defaultProvider` 結構與 `NewDefaultProvider()` 中新增欄位 `notifierConfigs []NotifierConfig`。
- [ ]  實作 `GetNotifierConfigs()` 方法，回傳內建的預設 notifier 設定（可後續改為從 JSON 檔或 ENV 讀取）。
- [ ]  補上相關註解，符合目前文件風格。
- [ ]  更新 `docs/interfaces/notifier.md`，補上 `EmailNotifier` 的實作位置與用途說明。
- [ ]  統一測試結構格式與描述，補上 `email_adapter_test.go` 未來預期用途。
- [ ]  強化擴充方式說明，標明 interface 實作與註冊點。
- [ ]  將 `bootstrap` 導入改為 `internal/registry`，並移除錯誤引用。
- [ ]  使用 `registry.NewNotifierRegistry(...)` 建立並儲存 notifier 實例。
- [ ]  統一註解風格，補上中文說明與語意清晰的格式。
- [ ]  每個步驟前加上中文 zh 註解對齊整體文件風格。
- [ ]  將原本 list append 的邏輯重構為使用命名工廠函式。
- [ ]  提取 notifier 實例建立邏輯為 `buildNotifier(cfg config.NotifierConfig, log logger.Logger) (notifieriface.Notifier, error)`。
- [ ]  使 main loop 結構更簡潔，利於單元測試與擴充。
- [ ]  將測試檔移至正確命名空間 `registry/notifier`。
- [ ]  修正匯入為 `registry` 模組，而非 `bootstrap`。
- [ ]  統一註解風格與中文說明，符合目前測試標準。
- [ ]  以簡潔方式驗證各類型 notifier 是否被正確註冊。
- [ ]  將 package 名稱由 `bootstrap` 修正為正確的 `scheduler`
- [ ]  移除錯誤路徑中的 `<user__selection>` 標記，改為正確的 `"github.com/detectviz/detectviz/pkg/ifaces/scheduler"`
- [ ]  建立 `internal/registry/registry.go`，統一導出所有 Registry 提供器（如 Notifier, Scheduler）。
- [ ]  匯入子模組 `notifier`, `scheduler`。
- [ ]  補上中文註解說明設計用途與用途導引。
- [ ]  將原本僅建立 notifier 的邏輯，改為透過 `registry.New()` 建立 unified Registry 實例。
- [ ]  調整註解說明為註冊所有平台元件。
- [ ]  將產生的 `Registry` 實例儲存為全域變數，方便後續模組存取。
- [ ]  建立 `internal/registry/alert/evaluator_registry.go` 檔案。
- [ ]  定義 `AlertEvaluatorRegistry` struct 與註冊與查詢邏輯。
- [ ]  支援注入 Prometheus / Flux evaluator，日後可擴充。
- [ ]  加入統一註解風格與中文說明。
- [ ]  在 `evaluator_registry.go` 中加入 PromEvaluator 與 FluxEvaluator 的初始化與註冊邏輯。
- [ ]  實作 `NewDefaultAlertEvaluatorRegistry(log logger.Logger)` 建立註冊中心並注入兩種 evaluator。
- [ ]  匯入 logger 套件與對應 evaluator 實作。
- [ ]  在 `Init()` 中補上 AlertEvaluatorRegistry 的初始化與註冊。
- [ ]  呼叫 `registry.NewDefaultAlertEvaluatorRegistry()` 並將結果儲存為全域變數供後續模組使用。
- [ ]  在 `ConfigProvider` interface 中新增 logger 介面方法定義。
- [ ]  匯入 `"github.com/detectviz/detectviz/pkg/ifaces/logger"`。
- [ ]  補上統一風格的中英文註解。
- [ ]  在 `defaultProvider` 結構中加入 `log logger.Logger` 欄位。
- [ ]  匯入 `github.com/detectviz/detectviz/pkg/ifaces/logger` 套件。
- [ ]  在 `NewDefaultProvider()` 中初始化 logger 實例。
- [ ]  實作 `Logger()` 方法以符合 `ConfigProvider` 介面。
- [ ]  建立完整的測試策略與原則說明文件 `docs/test-duide.md`，對齊 detectviz 專案架構。
- [ ]  說明各層級測試責任、mock/fake 用法、命名規則與目錄建議。
- [ ]  加入中文註解與實例，方便未來維護與共用。
- [ ]  單元測試：與被測檔案同名並加上 `_test.go`
- [ ]  手寫 mock：放在對應模組下 `mock_adapter.go`
- [ ]  共用測試工具：放在 `/internal/testutil/` 或 `/pkg/testutil/`
- [ ]  自動生成 mock：使用 [mockery](https://github.com/vektra/mockery)，放在 `/pkg/mocks/`
- [ ]  每個模組都需至少有對應 `_test.go` 測試檔
- [ ]  單元測試應使用 `t.Run(...)` 拆分子案例
- [ ]  mock 只驗證 interface 行為，不重現邏輯
- [ ]  測試應覆蓋正常與錯誤情境（happy + error path）
- [ ]  調整整體章節順序，讓測試層級與命名原則先介紹，再進入目錄結構與範例。
- [ ]  將章節順序調整為：
- [ ]  每個模組都需至少有對應 `_test.go` 測試檔
- [ ]  單元測試應使用 `t.Run(...)` 拆分子案例
- [ ]  mock 只驗證 interface 行為，不重現邏輯
- [ ]  測試應覆蓋正常與錯誤情境（happy + error path）
- [ ]  單元測試：與被測檔案同名並加上 `_test.go`
- [ ]  手寫 mock：放在對應模組下 `mock_adapter.go`
- [ ]  共用測試工具：放在 `/internal/testutil/` 或 `/pkg/testutil/`
- [ ]  自動生成 mock：使用 [mockery](https://github.com/vektra/mockery)，放在 `/pkg/mocks/`
- [ ]  在文件中新增一節 **「各功能模組測試清單」**，列出需撰寫測試的功能模組名稱、測試目的、命名慣例與建議路徑。
- [ ]  放在「模組命名與目錄慣例」章節下方，以利開發者快速對齊測試設計需求。
- [ ]  更新「各功能模組測試清單」中每個模組的測試路徑，統一符合 detectviz 專案目前的模組規劃。
- [ ]  將目錄調整為對應 `pkg/ifaces`、`internal/adapters` 與 `internal/registry` 的結構。
- [ ]  修正 EventBus 與 AlertEvaluator 的測試檔案命名與路徑，更貼近實際實作模組。
- [ ]  重寫 `docs/test-duide.md`，對齊剛才討論的測試目錄規劃與命名慣例。
- [ ]  內容依以下章節順序排列：
- [ ]  每個模組皆應具備 `_test.go` 測試檔。
- [ ]  單元測試應以 `t.Run(...)` 切分子情境。
- [ ]  Fake 用於模擬邏輯流程，Mock 用於驗證呼叫與參數。
- [ ]  測試涵蓋正常與異常情境（happy path / error path）。
- [ ]  禁止在非測試模組內定義 logger 或 config 的 mock 實作。
- [ ]  在 “## 命名與分層準則” 表格中補上每一層級對應的檔案目錄，讓讀者能快速對應實體路徑。
- [ ]  新增一欄「對應目錄」於表格中，並補齊所有欄位資料。
- [ ]  在文件末尾新增章節「📁 測試相關目錄說明」，補充以下四個目錄的用途與管理原則：
- [ ]  用途：手動實作的 Fake 類別，符合 interface，但不執行真實邏輯。
- [ ]  用於整合測試、模擬流程、不進行斷言。
- [ ]  範例：`fake_notifier.go`、`fake_scheduler.go`
- [ ]  用途：測試輔助函式與共用模組（logger、時間模擬、預設 context 等）。
- [ ]  範例：`test_logger.go`、`fake_clock.go`
- [ ]  用途：自動產生的 Mock 類別，使用 `mockery` 等工具產生。
- [ ]  用於驗證行為、呼叫次數、傳入參數。
- [ ]  對應指令範例：
- [ ]  用途：放置跨模組整合測試（如初始化流程、完整事件觸發測試）。
- [ ]  測試真實模組的註冊與協作行為。
- [ ]  範例：`registry_init_test.go`、`alert_pipeline_test.go`
- [ ]  在 `docs/test-duide.md` 結尾新增一節「最佳實踐：測試與目錄設計原則」，彙整對應 Clean Architecture 與 Go 實務的模組分類、目錄用途與命名原則。
- [ ]  🧩 **模組行為測試 → 模組內**
- [ ]  🧪 **整合流程驗證 → internal/test/integration/**
- [ ]  🧱 **可共用邏輯模擬 → internal/test/fakes/**
- [ ]  🔍 **呼叫驗證測試用 → internal/test/mocks/**
- [ ]  🧰 **log/config 等測試工具 → internal/test/testutil/**
- [ ]  移除整份文件中出現的所有 emoji（如：📁、🧩、🧪、🧱、🔍、🧰、等符號）。
- [ ]  保留原有標題與語意，不做段落結構變動。
- [ ]  補充 `## 實際範例說明` 章節，使其更完整說明每個目錄的範例用途與可擴充性。
- [ ]  針對 `pkg/mocks/`、`internal/test/fakes/`、`internal/test/testutil/`、`internal/test/integration/` 四個目錄進行擴充說明與實際情境補充。
- [ ]  用途：手動實作的 Fake 類別，符合 interface，但不執行真實邏輯。
- [ ]  用於整合測試、模擬流程、不進行斷言。
- [ ]  範例：
- [ ]  用途：測試輔助函式與共用模組（logger、時間模擬、預設 context 等）。
- [ ]  範例：
- [ ]  用途：放置跨模組整合測試（如初始化流程、完整事件觸發測試）。
- [ ]  測試真實模組的註冊與協作行為。
- [ ]  範例：
- [ ]  用途：自動產生的 Mock 類別，使用 `mockery` 等工具產生。
- [ ]  用於驗證行為、呼叫次數、傳入參數。
- [ ]  對應指令範例：
- [ ]  實例用途：
- [ ]  在 `/docs/testing/test-guide.md` 中補上一段導引說明，告知此測試指南已移至新位置。
- [ ]  內容包括新路徑與用途摘要，並提供快速導引格式。
- [ ]  單元測試、整合測試、Fake、Mock、測試工具分類原則
- [ ]  測試結構與目錄命名慣例
- [ ]  各模組對應測試位置與責任劃分
- [ ]  Grafana / Clean Architecture 的對齊實踐
- [ ]  在 `/README.md` 的「📁 專案目錄結構」與「🧭 快速導引文件」中補上測試文件與目錄資訊。
- [ ]  加入 `internal/test/` 與其說明，以及導向 `README.md` 的說明文件。
- [ ]  新增專案首頁 README.md 文件，內容涵蓋 Detectviz 專案的架構、功能模組、啟動方式與文件導引。
- [ ]  內容需對齊已完成的分層架構（Clean Architecture + Plugin）、模組（alert, scheduler, notifier 等）、介面文件與測試規範。
- [ ]  避免使用 emoji，風格需簡潔、技術導向。
- [ ]  **Logger**：支援 Zap 實作與 NopLogger。
- [ ]  **ConfigProvider**：統一提供全域設定注入。
- [ ]  **EventBus**：可註冊多種事件處理器（Host, Metric, Alert, Task）。
- [ ]  **AlertEvaluator**：支援 Prometheus、Flux 查詢條件擴充。
- [ ]  **Scheduler**：支援 Cron 與 WorkerPool 型任務排程。
- [ ]  **Notifier**：支援 Email、Slack、Webhook 多種通道。
- [ ]  介面定義與契約說明：`/docs/interfaces/`
- [ ]  模組註冊流程：`/internal/registry/`
- [ ]  測試策略與目錄：`/internal/test/README.md`
- [ ]  開發規範與設計原則：`/docs/develop-guide.md`
- [ ]  更新 `README.md` 中的「專案目錄結構」區塊，讓其與 `/internal/test/README.md` 所描述的實際架構對齊。
- [ ]  整理後目錄結構如下，並補充描述：
- [ ]  在 `docs/coding-style.md` 中新增「註解風格與語言標準」區塊，內容依照目前 detectviz 專案標準格式，清楚說明中英文註解搭配與範例
- [ ]  每個公開的 struct、interface、function 必須包含英文 GoDoc 註解。
- [ ]  若有額外中文補充，應以 `zh:` 為前綴，放在同一段或下一行。
- [ ]  若為欄位註解，可與變數置於同行。
- [ ]  `TODO:` 仍使用標準英文開頭，但可加上中文說明。
- [ ]  zh: 註解僅適用於開發與內部協作，不會出現在自動化 API 文件中。
- [ ]  在 `docs/coding-style.md` 最後新增一節，補充 `TODO` 與測試相關註解範例，對齊專案內部註解規範
- [ ]  所有可導出的元件皆應撰寫英文註解，並建議補上 `zh:` 中譯。
- [ ]  測試用的 fake/mock struct 建議清楚標示用途，例如 `// 用於整合測試，不含驗證邏輯`
- [ ]  結構、方法、欄位皆應保持註解風格一致，利於維護與自動文件生成。
- [ ]  在 `docs/coding-style.md` 最後新增區塊「介面與實作命名原則」，說明 interface 與 adapter 命名規則，並提供範例
- [ ]  所有 interface 命名採用具名描述詞結尾，例如：`Logger`、`Scheduler`、`MetricWriter`
- [ ]  interface 實作（adapter）命名需加入語意前綴或後綴，例如：
- [ ]  若為多介面組合的實作，可保留語意一致性，但避免冗長命名
- [ ]  建議 interface 檔案命名為：`<功能名>.go`（如 `logger.go`, `scheduler.go`）
- [ ]  建議 adapter 檔案命名為：`<類型>_adapter.go` 或 `<具體功能>.go`（如 `zap_adapter.go`, `cron_adapter.go`）
- [ ]  測試用實作以 `Mock` / `Fake` 為前綴，明確區隔
- [ ]  跨模組共享的實作命名應避免功能模糊，例如避免使用 `DefaultImpl`
- [ ]  對應文檔請一併維護於 `/docs/interfaces/` 中
- [ ]  在 `docs/coding-style.md` 結尾新增一節「靜態分析與 lint 工具」，說明如何透過 golangci-lint 強制檢查命名規範與格式一致性。
- [ ]  所有導出的 struct、interface、function 必須有對應英文註解（godot）
- [ ]  不可使用 `DefaultImpl` 等模糊命名
- [ ]  測試用物件建議以 `Mock` / `Fake` 為前綴
- [ ]  使用 gofumpt 強制格式一致
- [ ]  在文件開頭補上摘要區塊，說明本文件涵蓋內容。
- [ ]  優化整體 markdown 格式，使標題階層清楚、段落一致。
- [ ]  中英文註解格式與範例
- [ ]  Interface 與 Adapter 命名原則
- [ ]  Lint 與靜態分析工具建議（golangci-lint）
- [ ]  測試與模擬實作的撰寫建議
- [ ]  每個公開的 struct、interface、function 必須包含英文 GoDoc 註解。
- [ ]  若有額外中文補充，應以 `zh:` 為前綴，放在同一段或下一行。
- [ ]  若為欄位註解，可與變數置於同行。
- [ ]  所有可導出的元件皆應撰寫英文註解，並建議補上 `zh:` 中譯。
- [ ]  測試用的 fake/mock struct 建議清楚標示用途，例如 `// 用於整合測試，不含驗證邏輯`
- [ ]  結構、方法、欄位皆應保持註解風格一致，利於維護與自動文件生成。
- [ ]  所有 interface 命名採用具名描述詞結尾，例如：`Logger`、`Scheduler`、`MetricWriter`
- [ ]  interface 實作（adapter）命名需加入語意前綴或後綴，例如：
- [ ]  若為多介面組合的實作，可保留語意一致性，但避免冗長命名
- [ ]  建議 interface 檔案命名為：`<功能名>.go`（如 `logger.go`, `scheduler.go`）
- [ ]  建議 adapter 檔案命名為：`<類型>_adapter.go` 或 `<具體功能>.go`（如 `zap_adapter.go`, `cron_adapter.go`）
- [ ]  測試用實作以 `Mock` / `Fake` 為前綴，明確區隔
- [ ]  跨模組共享的實作命名應避免功能模糊，例如避免使用 `DefaultImpl`
- [ ]  對應文檔請一併維護於 `/docs/interfaces/` 中
- [ ]  所有導出的 struct、interface、function 必須有對應英文註解（godot）
- [ ]  不可使用 `DefaultImpl` 等模糊命名
- [ ]  測試用物件建議以 `Mock` / `Fake` 為前綴
- [ ]  使用 gofumpt 強制格式一致
- [ ]  更新 `/README.md` 中的「文件導引」區塊，補上新增的開發規範文檔與註解準則說明，並釐清各文件用途。
– 介面定義與契約說明：`/docs/interfaces/`
– 模組註冊流程：`/internal/registry/`
– 測試策略與目錄：`/internal/test/README.md`
– 開發規範與設計原則：`/docs/develop-guide.md`
- [ ]  將「文件導引」區塊中每一項目調整為 Markdown 超連結格式。
– `/docs/interfaces/`：介面定義與實作契約說明
– `/internal/registry/`：模組註冊流程（AlertEvaluator、Notifier、Scheduler 等）
– `/internal/test/README.md`：測試策略與實際目錄規劃
– `/docs/develop-guide.md`：設計原則與架構圖
– `/docs/coding-style.md`：程式撰寫風格（命名規則、註解格式、golangci-lint 設定）
- [ ]  在 `internal/adapters/alert/evaluator.go` 中建立預設的 `AlertEvaluator` 實作，符合 interface 位置與註解風格。
- [ ]  將 `Evaluate(ctx context.Context, rule alert.Rule)` 方法更新為符合 interface 中定義的 `Evaluate(ctx context.Context, cond AlertCondition)`，並回傳 `AlertResult`。
- [ ]  同時更新對應註解使其與介面對齊。
- [ ]  在 `Evaluate` 方法中補上基礎查詢邏輯，使用 `metric.QueryAdapter` 介面（需注入）查詢資料。
- [ ]  根據查詢結果與 `cond.Threshold` 進行簡單判斷，並產出 `AlertResult`。
- [ ]  在 `internal/adapters/alert/mock_adapter.go` 中加入 `MockAlertEvaluator` 的實作，符合 `alert.AlertEvaluator` 介面，並含中英文註解。
- [ ]  在 `internal/adapters/alert/mock_adapter_test.go` 中新增單元測試，驗證 `MockAlertEvaluator` 是否依照設定正確回傳結果與錯誤。
- [ ]  在 `internal/registry/alert/registry.go` 中建立註冊機制，將 `DefaultAlertEvaluator` 註冊為 alert.AlertEvaluator 實作。
- [ ]  清理原本設計為單一 evaluator 工廠函式的用途
- [ ]  加入統一的 `GetDefault()` 方法，以簡化使用常見 evaluator 的場景
- [ ]  加入說明與註解，使整體行為語意明確
- [ ]  在 `Init()` 中補上註解與註冊預設 evaluator 的邏輯。
- [ ]  透過 `AlertEvaluatorStore.Register` 註冊 prometheus evaluator。
- [ ]  在 `internal/bootstrap/init.go` 中補上 Flux Evaluator 的註冊邏輯與註解。
- [ ]  建立 `FluxAlertEvaluator` 結構，實作 `alert.AlertEvaluator` 介面。
- [ ]  引入必要套件與 interface。
- [ ]  使用 logger 並保留 TODO 區段以利後續查詢與比對實作。
- [ ]  在 `flux_test.go` 建立 `FluxAlertEvaluator` 的測試範本。
- [ ]  使用 table-driven test 格式，模擬尚未實作的行為。
- [ ]  在 `internal/adapters/alert/prom/prom.go` 中建立 `PromAlertEvaluator` 的實作，符合 `alert.AlertEvaluator` 介面。
- [ ]  加入 logger 注入與基礎 Evaluate 架構，保留查詢與比對邏輯的 TODO。
- [ ]  在 `prom_test.go` 中補上 `PromAlertEvaluator` 的基礎測試，採 table-driven 測試架構，符合目前介面與註解格式。
- [ ]  更新 “預期實作（Expected implementations）” 區段，補上實際存在的 evaluator 實作檔案。
- [ ]  保留原有靜態與 Nop 實作說明，新增 flux 與 prom。
- [ ]  新增 `MetricEvaluator` 與 `MetricFetcher` 兩個介面說明至 Interface 一覽表。
- [ ]  加入各自對應實作檔案與註解。
- [ ]  確保格式與現有項目一致。
- [ ]  引入 fmt 套件
- [ ]  評估邏輯中加入對 value 的 log 訊息
- [ ]  強化錯誤訊息格式，使用 fmt.Sprintf 包含表達式與錯誤內容
- [ ]  為未來擴充預留 operator 判斷邏輯（目前僅支援 >=）
- [ ]  在 AlertCondition 結構中新增 Operator 欄位，用來指定條件運算子（例如 “ge”, “lt”）
- [ ]  補上中英文註解，與現有欄位格式一致
- [ ]  為 `AlertCondition` struct 的其他欄位補上中英文註解，與 `Operator` 欄位格式一致。
- [ ]  確保整體註解風格統一。
- [ ]  在 `Evaluate()` 方法中依據 `cond.Operator` 動態決定比對方式。
- [ ]  支援 `ge`, `gt`, `le`, `lt`, `eq`, `ne` 六種基本運算子。
- [ ]  若未設定 operator，預設為 `ge`。
- [ ]  若遇到不支援的 operator，回傳錯誤訊息。
- [ ]  在 `pkg/ifaces/alert/evaluate.go` 中新增 `Evaluate` 函式，用來依據 `AlertCondition` 判斷查詢結果是否觸發告警。
- [ ]  支援多種比較運算子（ge, gt, le, lt, eq, ne）。
- [ ]  補上完整中英文註解，與其他模組註解風格一致。
- [ ]  將 `Evaluate()` 函式移除，作為邏輯拆分後應遷移至 `evaluate.go`。
- [ ]  保留 `AlertCondition`, `AlertResult`, `AlertEvaluator` 三個結構與介面定義。
- [ ]  在 `pkg/ifaces/alert/evaluate_test.go` 中新增 `Evaluate()` 函式的單元測試。
- [ ]  使用 table-driven 測試方式，涵蓋主要運算子與錯誤情境。
- [ ]  更新 `Evaluate()` 方法，改為呼叫 `alert.Evaluate()` 共用邏輯。
- [ ]  將原本內嵌的比對邏輯移除，避免重複程式碼。
- [ ]  補上相關註解以維持風格一致。
- [ ]  將 `MockAlertEvaluator` 結構與其方法補上標準化註解格式，確保符合專案風格。
- [ ]  補上 logger 注入欄位與預設 no-op 實作。
- [ ]  增加錯誤情境測試：當 MockError 被設定時，Evaluate 應回傳錯誤。